{% extends "PlantnetDataBundle::layout.html.twig" %}


{% block title module.Name %}

    {% block stylesheets %}
        {{ parent() }}
        <link rel="stylesheet" href="{{ asset('bundles/plantnetdata/js/fancybox/jquery.fancybox-1.3.4.css') }}" type="text/css" />

        <link href="{{ asset('bundles/plantnetdata/js/cloud-zoom/cloud-zoom.css') }}" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="{{ asset('bundles/plantnetdata/css/comments.css') }}" type="text/css" />

        {% include 'PlantnetDataBundle:Frontend:leaflet.css.html.twig' %}
        
	{% endblock %}

   {% block header %}<h1>{{ collection.Name }}</h1>{% endblock %}

{% block breadcrumb %}
 <ul class="breadcrumb">
    <li><a href="{{ path('_collection', { 'collection': collection.Name }) }}">{{ collection.Name }}</a><span class="divider">/</span></li>

    <li class="active"><a href="{{ path('_module', { 'collection': collection.Name, 'module': module.Name }) }}">{{ module.Name }}</a><span class="divider">></span></li>

    <li>details</li>
 </ul>

{% endblock %}

{% block main %}

<section id="details">

<table align='center' cellpadding="3" class="details" width="90%">
{% for row in data %}
    {% for field in display %}
    {% if row.attributes[field] %}
    <tr class= "">
            <td class="field-name">{{ field }}</td>
            <td class="field-value">{{ row.attributes[field] }}</td>
    </tr>
    {% endif %}
    {% endfor %}
{% endfor %}
</table>



{% if location[0] is defined %}
<div class="mapdetails">
    {{ vichgeo_map_for('detailmap', location) }}
    </div>
{% endif %}

    

{% for row in data %}
{% if row.images[0] is defined %}
        {% set imgspe =  row.images[0].path|basename %}
        {% set img = ['bundles/plantnetdata/data_images/img/', imgspe]|join('') %}
        <div class="bigImage">
        <a href="{{ asset(img) }}~1000x1000&copyright=Plantnet"
           class = 'cloud-zoom'
           id='zoom1'
           rel="position: 'inside' , showTitle: false, adjustX:-4, adjustY:-4">
            <img src="{{ asset(img) }}~500x500&copyright=Plantnet"
                 class="grouped_elements" alt="{{ asset(img) }}"
                 border="0"/>
        </a>
        </div>
        {% endif %}
   {% endfor %}
        <div class="gallery">
{% for row in data %}
    {% if row.images[0] is defined %}
                    {% for image in row.images %}
                    {% set imgspe =  image.path|basename %}
                    {% set img = ['bundles/plantnetdata/data_images/img/', imgspe]|join('') %}
                    <a href='{{ asset(img) }}~1000x1000&copyright=Plantnet'
                       class='cloud-zoom-gallery'
                       title=""
                       rel="useZoom: 'zoom1', smallImage: '{{ asset(img) }}~500x500&copyright=Plantnet' ">
                        <img src="{{ asset(img) }}~100x100" alt = "{{ asset(img) }}"/></a>

                    {% endfor %}
                    {% endif %}
{% endfor %}

            </div>





    {#{% render "FOSCommentBundle:Thread:show" with {"id": idplantunit} %}#}

    {# LEAFLET MAP #}
    <div id="map"></div>
    </section>
{% endblock %}



{% block javascripts %}
             {{ parent() }}
    <script type="text/JavaScript" src="{{ asset('bundles/plantnetdata/js/cloud-zoom/cloud-zoom.1.0.2.js') }}"></script>

    <script type="text/javascript" src="{{ asset('bundles/plantnetdata/js/fancybox/jquery.fancybox-1.3.4.pack.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/plantnetdata/js/fancybox/jquery.easing-1.3.pack.js') }}"></script>
    <script type="text/javascript">

        $(document).ready(function() {
                $("a#single_image").fancybox();
                /* Apply fancybox to multiple items */

                $("a.grouped_elements").fancybox({
                        'transitionIn'	:	'elastic',
                        'transitionOut'	:	'elastic',
                        'speedIn'		:	200,
                        'speedOut'		:	200,
                        'enableEscapeButton'    :true,
                        'hideOnContentClick'    : true,
                        'titlePosition'         : 'inside',
                        'overlayShow'	:	false
                });

        });

        </script>

       {# {% javascripts '@FOSCommentBundle/Resources/assets/js/comments.js' %}
            <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}#}
    {% include 'PlantnetDataBundle:Frontend:leaflet.js.html.twig' %}
{% endblock %}